use anyhow::{Context, Result};
use chrono::Utc;
use rust_decimal::Decimal;
use sqlx::Row;
use sqlx::{postgres::PgPoolOptions, PgPool};
use std::collections::HashMap;
use std::env;
use std::str::FromStr;
use uuid::Uuid;

#[derive(Clone)]
struct IngredientSeed {
    name: &'static str,
    uom_code: &'static str,
    shelf_life_days: Option<i32>,
    minimum_stock: Option<&'static str>,
    price_idr: Option<&'static str>,
    effective_at_override: Option<i64>,
}

#[tokio::main]
async fn main() -> Result<()> {
    dotenvy::dotenv().ok();
    let database_url = env::var("DATABASE_URL").expect("DATABASE_URL must be set");

    let pool = PgPoolOptions::new()
        .max_connections(5)
        .connect(&database_url)
        .await?;

    seed_ingredient_catalog(&pool).await?;
    println!("seeding ingredient_catalog selesai");
    Ok(())
}

async fn seed_ingredient_catalog(pool: &PgPool) -> Result<()> {
    let now_ms = Utc::now().timestamp_millis();

    let seeds: Vec<IngredientSeed> = vec![
        // Bahan pokok & kering
        IngredientSeed {
            name: "Beras Pandan Wangi Premium",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("150.000"),
            price_idr: Some("13500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Beras Merah Organik",
            uom_code: "kg",
            shelf_life_days: Some(210),
            minimum_stock: Some("80.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Beras Hitam Premium",
            uom_code: "kg",
            shelf_life_days: Some(210),
            minimum_stock: Some("65.000"),
            price_idr: Some("24500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Beras Ketan Putih",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("90.000"),
            price_idr: Some("17000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Beras Ketan Hitam",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("70.000"),
            price_idr: Some("22000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Terigu Protein Tinggi",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("120.000"),
            price_idr: Some("13500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Terigu Protein Sedang",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("160.000"),
            price_idr: Some("11800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Beras Halus",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("95.000"),
            price_idr: Some("11000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Tapioka Halus",
            uom_code: "kg",
            shelf_life_days: Some(200),
            minimum_stock: Some("140.000"),
            price_idr: Some("9800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Maizena",
            uom_code: "kg",
            shelf_life_days: Some(200),
            minimum_stock: Some("110.000"),
            price_idr: Some("14500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Sagu Halus",
            uom_code: "kg",
            shelf_life_days: Some(200),
            minimum_stock: Some("60.000"),
            price_idr: Some("12500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Gula Pasir Putih",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("200.000"),
            price_idr: Some("14800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Gula Merah Serut",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("85.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Gula Aren Bubuk",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("75.000"),
            price_idr: Some("19500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Garam Halus Beryodium",
            uom_code: "kg",
            shelf_life_days: Some(720),
            minimum_stock: Some("250.000"),
            price_idr: Some("5000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Garam Laut Kasar",
            uom_code: "kg",
            shelf_life_days: Some(720),
            minimum_stock: Some("190.000"),
            price_idr: Some("4800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Minyak Goreng Sawit Premium",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("220.000"),
            price_idr: Some("14200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Minyak Kelapa Murni",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("90.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Minyak Wijen Aromatik",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("55.000"),
            price_idr: Some("41000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Minyak Zaitun Extra Virgin",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("70.000"),
            price_idr: Some("68000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Minyak Jagung Sehat",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("65.000"),
            price_idr: Some("36500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cuka Masak Putih",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("85.000"),
            price_idr: Some("8500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cuka Apel Organik",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("40.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kecap Manis Kental",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("130.000"),
            price_idr: Some("23500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kecap Asin Gurih",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("70.000"),
            price_idr: Some("21500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kecap Inggris Aromatik",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("35.000"),
            price_idr: Some("38000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kecap Jepang Shoyu",
            uom_code: "L",
            shelf_life_days: Some(540),
            minimum_stock: Some("45.000"),
            price_idr: Some("29500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Tiram Premium",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("95.000"),
            price_idr: Some("32000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Sambal Ekstra Pedas",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("110.000"),
            price_idr: Some("27000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Tomat Rumahan",
            uom_code: "kg",
            shelf_life_days: Some(300),
            minimum_stock: Some("90.000"),
            price_idr: Some("21000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Mayones Gurih",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("85.000"),
            price_idr: Some("38500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Barbeque Asap",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("75.000"),
            price_idr: Some("42500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Susu Kental Manis Putih",
            uom_code: "ml",
            shelf_life_days: Some(360),
            minimum_stock: Some("450.000"),
            price_idr: Some("8500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Susu Evaporasi",
            uom_code: "ml",
            shelf_life_days: Some(360),
            minimum_stock: Some("380.000"),
            price_idr: Some("9200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Krim Kental Cair",
            uom_code: "ml",
            shelf_life_days: Some(120),
            minimum_stock: Some("260.000"),
            price_idr: Some("26500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Yogurt Plain Literan",
            uom_code: "L",
            shelf_life_days: Some(45),
            minimum_stock: Some("60.000"),
            price_idr: Some("33500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Santan Kental Instan",
            uom_code: "ml",
            shelf_life_days: Some(180),
            minimum_stock: Some("520.000"),
            price_idr: Some("7500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Santan Cair Segar",
            uom_code: "ml",
            shelf_life_days: Some(7),
            minimum_stock: Some("400.000"),
            price_idr: Some("6500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Margarin Serbaguna",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("140.000"),
            price_idr: Some("19500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Mentega Tawar Premium",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("105.000"),
            price_idr: Some("46500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Keju Cheddar Parut",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("95.000"),
            price_idr: Some("58500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Keju Mozzarella Blok",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("85.000"),
            price_idr: Some("112500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Keju Parmesan Bubuk",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("40.000"),
            price_idr: Some("158000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cream Cheese Lembut",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("55.000"),
            price_idr: Some("99500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ragi Instan Kering",
            uom_code: "g",
            shelf_life_days: Some(365),
            minimum_stock: Some("4500.000"),
            price_idr: Some("125.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Baking Powder Aluminium Free",
            uom_code: "g",
            shelf_life_days: Some(365),
            minimum_stock: Some("5200.000"),
            price_idr: Some("115.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Soda Kue Premium",
            uom_code: "g",
            shelf_life_days: Some(365),
            minimum_stock: Some("4900.000"),
            price_idr: Some("95.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Vanili Bubuk",
            uom_code: "g",
            shelf_life_days: Some(365),
            minimum_stock: Some("1800.000"),
            price_idr: Some("285.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cokelat Bubuk Hitam",
            uom_code: "kg",
            shelf_life_days: Some(365),
            minimum_stock: Some("65.000"),
            price_idr: Some("79500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cokelat Masak Batang",
            uom_code: "kg",
            shelf_life_days: Some(365),
            minimum_stock: Some("70.000"),
            price_idr: Some("98500.0000"),
            effective_at_override: None,
        },
        // Bumbu segar dan kering
        IngredientSeed {
            name: "Bawang Merah Kupas",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("120.000"),
            price_idr: Some("29800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bawang Putih Kupas",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("110.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bawang Bombay Besar",
            uom_code: "kg",
            shelf_life_days: Some(30),
            minimum_stock: Some("85.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Bawang Segar",
            uom_code: "bn",
            shelf_life_days: Some(7),
            minimum_stock: Some("160.000"),
            price_idr: Some("3500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Seledri Segar",
            uom_code: "bn",
            shelf_life_days: Some(7),
            minimum_stock: Some("140.000"),
            price_idr: Some("3000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Jeruk Purut",
            uom_code: "bn",
            shelf_life_days: Some(10),
            minimum_stock: Some("90.000"),
            price_idr: Some("4800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Salam Wangi",
            uom_code: "bn",
            shelf_life_days: Some(10),
            minimum_stock: Some("95.000"),
            price_idr: Some("4200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Serai Batang Aroma",
            uom_code: "stk",
            shelf_life_days: Some(10),
            minimum_stock: Some("220.000"),
            price_idr: Some("2800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jahe Emprit Segar",
            uom_code: "kg",
            shelf_life_days: Some(14),
            minimum_stock: Some("75.000"),
            price_idr: Some("21500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kunyit Segar",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("68.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Lengkuas Segar",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("70.000"),
            price_idr: Some("15000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kencur Segar",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("40.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kemiri Kupas Sangrai",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("55.000"),
            price_idr: Some("46500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ketumbar Bubuk",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("3200.000"),
            price_idr: Some("145.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Lada Putih Bubuk",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("2800.000"),
            price_idr: Some("235.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Lada Hitam Bubuk",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("2600.000"),
            price_idr: Some("245.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jintan Bubuk",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("2100.000"),
            price_idr: Some("165.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pala Bubuk",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1500.000"),
            price_idr: Some("305.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kayu Manis Batang",
            uom_code: "pcs",
            shelf_life_days: Some(360),
            minimum_stock: Some("900.000"),
            price_idr: Some("1500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kapulaga Hijau",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1200.000"),
            price_idr: Some("385.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cengkeh Kering",
            uom_code: "g",
            shelf_life_days: Some(360),
            minimum_stock: Some("1800.000"),
            price_idr: Some("295.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Biji Wijen Putih",
            uom_code: "g",
            shelf_life_days: Some(360),
            minimum_stock: Some("3400.000"),
            price_idr: Some("120.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Biji Wijen Hitam",
            uom_code: "g",
            shelf_life_days: Some(360),
            minimum_stock: Some("2100.000"),
            price_idr: Some("165.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Biji Adas Kering",
            uom_code: "g",
            shelf_life_days: Some(360),
            minimum_stock: Some("1600.000"),
            price_idr: Some("150.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Ketumbar Kering",
            uom_code: "g",
            shelf_life_days: Some(180),
            minimum_stock: Some("1300.000"),
            price_idr: Some("210.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Oregano Kering",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1450.000"),
            price_idr: Some("190.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Basil Kering",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1380.000"),
            price_idr: Some("195.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Rosemary Kering",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1100.000"),
            price_idr: Some("225.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Thyme Kering",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1250.000"),
            price_idr: Some("205.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Parsley Kering",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("1180.000"),
            price_idr: Some("198.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bawang Goreng Renyah",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("55.000"),
            price_idr: Some("64500.0000"),
            effective_at_override: None,
        },
        // Sayur dan buah
        IngredientSeed {
            name: "Cabai Rawit Merah Segar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("85.000"),
            price_idr: Some("62000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cabai Merah Keriting",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("95.000"),
            price_idr: Some("48000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cabai Hijau Besar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("35500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cabai Bubuk Halus",
            uom_code: "g",
            shelf_life_days: Some(240),
            minimum_stock: Some("3100.000"),
            price_idr: Some("185.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cabai Kering Utuh",
            uom_code: "kg",
            shelf_life_days: Some(270),
            minimum_stock: Some("60.000"),
            price_idr: Some("64500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tomat Merah Lokal",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("150.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tomat Ceri Manis",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("55.000"),
            price_idr: Some("48500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Wortel Organik",
            uom_code: "kg",
            shelf_life_days: Some(21),
            minimum_stock: Some("120.000"),
            price_idr: Some("21000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kentang Granola Besar",
            uom_code: "kg",
            shelf_life_days: Some(30),
            minimum_stock: Some("140.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kentang Kupas Vacuum",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jagung Manis Pipil",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("75.000"),
            price_idr: Some("24500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jagung Manis Utuh",
            uom_code: "pcs",
            shelf_life_days: Some(5),
            minimum_stock: Some("360.000"),
            price_idr: Some("4500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Paprika Merah",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("60.000"),
            price_idr: Some("62500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Paprika Hijau",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("58.000"),
            price_idr: Some("54500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Paprika Kuning",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("55.000"),
            price_idr: Some("64500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Brokoli Segar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kembang Kol Segar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("85.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kol Putih Segar",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("140.000"),
            price_idr: Some("14500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kubis Ungu Segar",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("75.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bayam Hijau",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("180.000"),
            price_idr: Some("3000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kangkung Organik",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("170.000"),
            price_idr: Some("2800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sawi Putih Segar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("120.000"),
            price_idr: Some("17500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pakcoy Segar",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("160.000"),
            price_idr: Some("3500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Selada Keriting",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("140.000"),
            price_idr: Some("4500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Timun Lokal",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("130.000"),
            price_idr: Some("12000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Terong Ungu",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("95.000"),
            price_idr: Some("15500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Buncis Super",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("85.000"),
            price_idr: Some("23500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kacang Panjang",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("150.000"),
            price_idr: Some("3200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Labu Siam",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("75.000"),
            price_idr: Some("9500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pare Segar",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("65.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Singkong",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("110.000"),
            price_idr: Some("3000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Pepaya",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("90.000"),
            price_idr: Some("4500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Kemangi",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("130.000"),
            price_idr: Some("2500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Pandan",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("95.000"),
            price_idr: Some("3500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daun Suji",
            uom_code: "bn",
            shelf_life_days: Some(5),
            minimum_stock: Some("80.000"),
            price_idr: Some("3600.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jamur Kancing Segar",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("65.000"),
            price_idr: Some("43500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jamur Tiram Putih",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("70.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jamur Kuping Hitam",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("55.000"),
            price_idr: Some("30500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jamur Enoki",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("40.000"),
            price_idr: Some("68500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ubi Jalar Kuning",
            uom_code: "kg",
            shelf_life_days: Some(30),
            minimum_stock: Some("110.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ubi Ungu Manis",
            uom_code: "kg",
            shelf_life_days: Some(30),
            minimum_stock: Some("95.000"),
            price_idr: Some("19500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Singkong Kupas",
            uom_code: "kg",
            shelf_life_days: Some(14),
            minimum_stock: Some("120.000"),
            price_idr: Some("9500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pisang Raja Matang",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("85.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Nanas Madu Besar",
            uom_code: "pcs",
            shelf_life_days: Some(7),
            minimum_stock: Some("120.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pepaya California",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("14500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Mangga Harum Manis",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("85.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jeruk Pontianak Manis",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("110.000"),
            price_idr: Some("19500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Apel Malang",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("95.000"),
            price_idr: Some("26500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Semangka Tanpa Biji",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("150.000"),
            price_idr: Some("12500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Melon Honeydew",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("120.000"),
            price_idr: Some("16500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Anggur Merah Lokal",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("60.000"),
            price_idr: Some("48500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Stroberi Segar",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("35.000"),
            price_idr: Some("82500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Blueberry Impor",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("25.000"),
            price_idr: Some("145000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Lemon Lokal Segar",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("70.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Jeruk Nipis Segar",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("60.000"),
            price_idr: Some("29500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Alpukat Mentega",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("35500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sirsak Segar",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("45.000"),
            price_idr: Some("21500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Belimbing Manis",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("55.000"),
            price_idr: Some("18000.0000"),
            effective_at_override: None,
        },
        // Protein hewani dan olahan
        IngredientSeed {
            name: "Ayam Kampung Utuh",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("95.000"),
            price_idr: Some("64500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ayam Broiler Dada Fillet",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("120.000"),
            price_idr: Some("38500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ayam Broiler Paha Fillet",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("110.000"),
            price_idr: Some("34500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ayam Giling Halus",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("80.000"),
            price_idr: Some("36500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ayam Utuh Potong Delapan",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("90.000"),
            price_idr: Some("32000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Sapi Has Dalam",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("60.000"),
            price_idr: Some("138500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Sapi Sandung Lamur",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("55.000"),
            price_idr: Some("98500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Sapi Giling",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("70.000"),
            price_idr: Some("88500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Iga Sapi Potong",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("45.000"),
            price_idr: Some("118500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Kambing Paha",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("40.000"),
            price_idr: Some("112500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Gurame Fillet",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("65.000"),
            price_idr: Some("68500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Kakap Merah Fillet",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("55.000"),
            price_idr: Some("98500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Tuna Loin",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("70.000"),
            price_idr: Some("112000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Salmon Fillet",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("50.000"),
            price_idr: Some("198000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Patin Fillet",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("80.000"),
            price_idr: Some("42500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Udang Vanname Sedang",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("60.000"),
            price_idr: Some("98500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Udang Windu Besar",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("40.000"),
            price_idr: Some("148500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cumi Kupas Tabung",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("55.000"),
            price_idr: Some("84500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cumi Bunga Potong",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("45.000"),
            price_idr: Some("89500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kerang Hijau Kupas",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("65.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kerang Dara Kupas",
            uom_code: "kg",
            shelf_life_days: Some(3),
            minimum_stock: Some("55.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Telur Ayam Kampung",
            uom_code: "pcs",
            shelf_life_days: Some(21),
            minimum_stock: Some("480.000"),
            price_idr: Some("3200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Telur Ayam Ras",
            uom_code: "pcs",
            shelf_life_days: Some(21),
            minimum_stock: Some("960.000"),
            price_idr: Some("1800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Telur Puyuh",
            uom_code: "pcs",
            shelf_life_days: Some(14),
            minimum_stock: Some("1500.000"),
            price_idr: Some("600.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tempe Daun Segar",
            uom_code: "pcs",
            shelf_life_days: Some(3),
            minimum_stock: Some("240.000"),
            price_idr: Some("5500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tempe Mendoan Tipis",
            uom_code: "pcs",
            shelf_life_days: Some(3),
            minimum_stock: Some("220.000"),
            price_idr: Some("3500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tahu Putih Kotak",
            uom_code: "pcs",
            shelf_life_days: Some(3),
            minimum_stock: Some("320.000"),
            price_idr: Some("2500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tahu Kuning Padat",
            uom_code: "pcs",
            shelf_life_days: Some(5),
            minimum_stock: Some("300.000"),
            price_idr: Some("2800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tofu Sutra Jepang",
            uom_code: "pcs",
            shelf_life_days: Some(7),
            minimum_stock: Some("180.000"),
            price_idr: Some("5500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sosis Sapi Premium",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("400.000"),
            price_idr: Some("6200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sosis Ayam Gurih",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("380.000"),
            price_idr: Some("4500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bakso Sapi Kenyal",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("520.000"),
            price_idr: Some("3500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bakso Ayam Gurih",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("500.000"),
            price_idr: Some("2800.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bakso Ikan Laut",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("460.000"),
            price_idr: Some("3200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Nugget Ayam Renyah",
            uom_code: "pcs",
            shelf_life_days: Some(30),
            minimum_stock: Some("540.000"),
            price_idr: Some("4200.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Ayam Bumbu Rujak",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("75.000"),
            price_idr: Some("48500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Ikan Bandeng Presto",
            uom_code: "pcs",
            shelf_life_days: Some(5),
            minimum_stock: Some("160.000"),
            price_idr: Some("22500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Rendang Sapi Siap Saji",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("40.000"),
            price_idr: Some("165000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Sapi Slice Shabu",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("45.000"),
            price_idr: Some("189500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kulit Ayam Crispy",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("30.000"),
            price_idr: Some("36500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kaldu Ayam Bubuk",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("45.000"),
            price_idr: Some("78500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kaldu Sapi Bubuk",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("40.000"),
            price_idr: Some("82500.0000"),
            effective_at_override: None,
        },
        // Bahan baku turunan untuk produk katalog gambar
        IngredientSeed {
            name: "Bamboo Taro Dessert Base",
            uom_code: "kg",
            shelf_life_days: Some(90),
            minimum_stock: Some("45.000"),
            price_idr: Some("68000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cappuccino Praline Concentrate",
            uom_code: "L",
            shelf_life_days: Some(180),
            minimum_stock: Some("60.000"),
            price_idr: Some("52000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Chocolate Berry Mousse Layer",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("55.000"),
            price_idr: Some("102000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Citrus Cooler Syrup",
            uom_code: "L",
            shelf_life_days: Some(240),
            minimum_stock: Some("70.000"),
            price_idr: Some("36000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sesame Burger Bun Dough",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("90.000"),
            price_idr: Some("25000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Spring Roll Vegetable Filling",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("80.000"),
            price_idr: Some("42000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Caramel Milkshake Mix",
            uom_code: "L",
            shelf_life_days: Some(120),
            minimum_stock: Some("65.000"),
            price_idr: Some("49000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Wedding Cake Fondant Sheet",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("50.000"),
            price_idr: Some("78000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Craft Cola Syrup",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("120.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Floral Coffee Infusion",
            uom_code: "L",
            shelf_life_days: Some(180),
            minimum_stock: Some("45.000"),
            price_idr: Some("65000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Barista Full Cream Milk",
            uom_code: "L",
            shelf_life_days: Some(14),
            minimum_stock: Some("150.000"),
            price_idr: Some("23500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Garden Veggie Pizza Topping",
            uom_code: "kg",
            shelf_life_days: Some(4),
            minimum_stock: Some("70.000"),
            price_idr: Some("38500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Golden Fry Potatoes",
            uom_code: "kg",
            shelf_life_days: Some(30),
            minimum_stock: Some("150.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Latte Art Microfoam Mix",
            uom_code: "L",
            shelf_life_days: Some(30),
            minimum_stock: Some("85.000"),
            price_idr: Some("45500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Matcha Creme Drizzle",
            uom_code: "kg",
            shelf_life_days: Some(240),
            minimum_stock: Some("40.000"),
            price_idr: Some("118000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Iced Milk Coffee Base",
            uom_code: "L",
            shelf_life_days: Some(90),
            minimum_stock: Some("95.000"),
            price_idr: Some("52000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Orange Sparkler Nectar",
            uom_code: "L",
            shelf_life_days: Some(150),
            minimum_stock: Some("75.000"),
            price_idr: Some("34500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pumpkin Spice Puree",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("60.000"),
            price_idr: Some("38000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Lavender Ube Frappe Base",
            uom_code: "kg",
            shelf_life_days: Some(210),
            minimum_stock: Some("55.000"),
            price_idr: Some("89000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Raspberry Cream Filling",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("60.000"),
            price_idr: Some("99000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Wood-Fired Pizza Sauce",
            uom_code: "kg",
            shelf_life_days: Some(90),
            minimum_stock: Some("80.000"),
            price_idr: Some("41000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sparkling Pink Lemonade Syrup",
            uom_code: "L",
            shelf_life_days: Some(240),
            minimum_stock: Some("110.000"),
            price_idr: Some("29500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Chili Tofu Cubes",
            uom_code: "kg",
            shelf_life_days: Some(14),
            minimum_stock: Some("85.000"),
            price_idr: Some("52000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Strawberry Matcha Jam",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("50.000"),
            price_idr: Some("88000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sunset Orange Tea Base",
            uom_code: "L",
            shelf_life_days: Some(180),
            minimum_stock: Some("95.000"),
            price_idr: Some("36000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tofu Rainbow Bowl Mix",
            uom_code: "kg",
            shelf_life_days: Some(7),
            minimum_stock: Some("90.000"),
            price_idr: Some("45500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Vegetable Ramen Broth",
            uom_code: "L",
            shelf_life_days: Some(10),
            minimum_stock: Some("120.000"),
            price_idr: Some("38500.0000"),
            effective_at_override: None,
        },
        // Bahan pokok tambahan untuk menu utama & minuman
        IngredientSeed {
            name: "Nasi Putih Medium Grain",
            uom_code: "kg",
            shelf_life_days: Some(2),
            minimum_stock: Some("600.000"),
            price_idr: Some("11500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kecap Manis Premium",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("120.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Tiram Premium",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("80.000"),
            price_idr: Some("32500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bumbu Nasi Goreng Tradisional",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("90.000"),
            price_idr: Some("54000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bumbu Nasi Goreng Spesial",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("70.000"),
            price_idr: Some("62500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bumbu Nasi Goreng Seafood",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("65.000"),
            price_idr: Some("67500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bumbu Nasi Kuning",
            uom_code: "kg",
            shelf_life_days: Some(150),
            minimum_stock: Some("85.000"),
            price_idr: Some("49500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Tepung Bumbu Gurame",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("55.000"),
            price_idr: Some("38500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Roti Burger Sesame",
            uom_code: "pcs",
            shelf_life_days: Some(5),
            minimum_stock: Some("480.000"),
            price_idr: Some("6500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Patty Daging Sapi Burger",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("85.000"),
            price_idr: Some("98500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Pasta Spaghetti Durum",
            uom_code: "kg",
            shelf_life_days: Some(540),
            minimum_stock: Some("160.000"),
            price_idr: Some("24500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Saus Pasta Marinara",
            uom_code: "kg",
            shelf_life_days: Some(180),
            minimum_stock: Some("95.000"),
            price_idr: Some("31500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Keju Mozzarella Block",
            uom_code: "kg",
            shelf_life_days: Some(210),
            minimum_stock: Some("75.000"),
            price_idr: Some("128500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Adonan Pizza Beku",
            uom_code: "kg",
            shelf_life_days: Some(90),
            minimum_stock: Some("70.000"),
            price_idr: Some("42500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bubuk Matcha Premium",
            uom_code: "kg",
            shelf_life_days: Some(360),
            minimum_stock: Some("35.000"),
            price_idr: Some("212500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Biji Kopi Arabika Medium Roast",
            uom_code: "kg",
            shelf_life_days: Some(300),
            minimum_stock: Some("60.000"),
            price_idr: Some("189000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sirup Gula Cair",
            uom_code: "L",
            shelf_life_days: Some(360),
            minimum_stock: Some("140.000"),
            price_idr: Some("18500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Krim Kental Manis Cair",
            uom_code: "L",
            shelf_life_days: Some(120),
            minimum_stock: Some("110.000"),
            price_idr: Some("31500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Susu Segar Pasteurisasi",
            uom_code: "L",
            shelf_life_days: Some(14),
            minimum_stock: Some("180.000"),
            price_idr: Some("19500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Filling Pie Apel",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("65.000"),
            price_idr: Some("42500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Kulit Pie Beku",
            uom_code: "pcs",
            shelf_life_days: Some(120),
            minimum_stock: Some("320.000"),
            price_idr: Some("4500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Cake Mix Vanilla Premium",
            uom_code: "kg",
            shelf_life_days: Some(270),
            minimum_stock: Some("90.000"),
            price_idr: Some("48500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Sayuran Campur Beku",
            uom_code: "kg",
            shelf_life_days: Some(300),
            minimum_stock: Some("150.000"),
            price_idr: Some("28500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Bok Choy Segar",
            uom_code: "kg",
            shelf_life_days: Some(5),
            minimum_stock: Some("80.000"),
            price_idr: Some("21000.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Paprika Merah Besar",
            uom_code: "kg",
            shelf_life_days: Some(10),
            minimum_stock: Some("70.000"),
            price_idr: Some("45500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Daging Sapi Cincang Premium",
            uom_code: "kg",
            shelf_life_days: Some(120),
            minimum_stock: Some("95.000"),
            price_idr: Some("112500.0000"),
            effective_at_override: None,
        },
        IngredientSeed {
            name: "Dada Ayam Fillet Tanpa Kulit",
            uom_code: "kg",
            shelf_life_days: Some(90),
            minimum_stock: Some("120.000"),
            price_idr: Some("62500.0000"),
            effective_at_override: None,
        },
    ];

    let mut codes: Vec<String> = seeds.iter().map(|s| s.uom_code.to_string()).collect();
    codes.sort();
    codes.dedup();

    let rows: Vec<(String, Uuid, Option<String>)> =
        sqlx::query_as("SELECT code, uuid, name FROM units_of_measure WHERE code = ANY($1)")
            .bind(&codes)
            .fetch_all(pool)
            .await?;

    let uom_map: HashMap<String, (Uuid, Option<String>)> = rows
        .into_iter()
        .map(|(code, uuid, name)| (code, (uuid, name)))
        .collect();

    for code in &codes {
        if !uom_map.contains_key(code) {
            anyhow::bail!(
                "Kode UOM {} tidak ditemukan. Jalankan seeder units_of_measure terlebih dahulu.",
                code
            );
        }
    }

    let mut tx = pool.begin().await?;

    for seed in &seeds {
        let (uom_uuid, uom_name_opt) = uom_map
            .get(seed.uom_code)
            .with_context(|| format!("UOM dengan kode {} belum tersedia", seed.uom_code))?
            .clone();
        let minimum_stock = parse_decimal(seed.minimum_stock)?;
        let price = parse_decimal(seed.price_idr)?;
        let effective_at = seed.effective_at_override.unwrap_or(now_ms);
        let uom_name_value = uom_name_opt.unwrap_or_else(|| seed.uom_code.to_string());

        let row = sqlx::query(
            r#"
            INSERT INTO ingredient_catalog
                (name, unit_of_measure_uuid, minimum_stock, shelf_life_days, price, effective_at, created_at, updated_at)
            VALUES ($1, $2, $3, $4, $5, $6, $7, $7)
            ON CONFLICT (name) DO UPDATE SET
                unit_of_measure_uuid = EXCLUDED.unit_of_measure_uuid,
                minimum_stock = EXCLUDED.minimum_stock,
                shelf_life_days = EXCLUDED.shelf_life_days,
                price = EXCLUDED.price,
                effective_at = EXCLUDED.effective_at,
                updated_at = EXCLUDED.updated_at
            RETURNING uuid, effective_at
            "#
        )
        .bind(seed.name)
        .bind(uom_uuid)
        .bind(minimum_stock)
        .bind(seed.shelf_life_days)
        .bind(price.clone())
        .bind(effective_at)
        .bind(now_ms)
        .fetch_one(&mut *tx)
        .await?;

        let ingredient_uuid: Uuid = row.try_get("uuid")?;
        let ingredient_effective_at: i64 = row.try_get("effective_at")?;

        let market_price_exists: bool = sqlx::query_scalar(
            r#"
            SELECT EXISTS (
                SELECT 1
                FROM ingredient_market_prices
                WHERE ingredient_catalog_uuid = $1
                  AND effective_at = $2
                  AND deleted_at = 0
                LIMIT 1
            )
            "#,
        )
        .bind(ingredient_uuid)
        .bind(ingredient_effective_at)
        .fetch_one(&mut *tx)
        .await?;

        if !market_price_exists {
            sqlx::query(
                r#"
                INSERT INTO ingredient_market_prices
                    (uuid, ingredient_catalog_uuid, name, price, effective_at, unit_of_measure_code, unit_of_measure_name, created_at, updated_at, deleted_at)
                VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $8, 0)
                "#
            )
            .bind(Uuid::new_v4())
            .bind(ingredient_uuid)
            .bind(Some(seed.name))
            .bind(price.clone())
            .bind(ingredient_effective_at)
            .bind(Some(seed.uom_code.to_string()))
            .bind(Some(uom_name_value.clone()))
            .bind(now_ms)
            .execute(&mut *tx)
            .await?;
        }
    }

    tx.commit().await?;
    Ok(())
}

fn parse_decimal(value: Option<&'static str>) -> Result<Option<Decimal>> {
    match value {
        Some(v) => {
            let decimal = Decimal::from_str(v)
                .with_context(|| format!("gagal parsing angka desimal dari '{}'", v))?;
            Ok(Some(decimal))
        }
        None => Ok(None),
    }
}
